---
// frontmatter Î∂àÌïÑÏöî
const dbClient = '../src/scripts/searchBarDb.client.ts'
const spClient = '../src/scripts/searchBarSpotify.client.ts'
---

<style>
  /* Í∏∞Ï°¥ Ïä§ÌÉÄÏùº Í∑∏ÎåÄÎ°ú Ïû¨ÏÇ¨Ïö© */
  .searchbar {
    --bg: #f3f4f6;
    --bd: #d1d5db;
    --fg: #111827;
    display: grid;
    grid-template-columns: auto 1fr auto;
    align-items: center;
    gap: .5rem;
    padding: .5rem .75rem;
    border: 1px solid var(--bd);
    border-radius: 8px;
    background: var(--bg);
    color: var(--fg);
    transition: background .15s ease, border-color .15s ease, box-shadow .15s ease;
    box-shadow: 0 1px 2px rgba(0,0,0,.04);
  }
  .theme-none   { --bg:#f3f4f6; --bd:#d1d5db; --fg:#111827; }
  .theme-artist { --bg:#eef2ff; --bd:#c7d2fe; --fg:#3730a3; }
  .theme-album  { --bg:#ecfdf5; --bd:#a7f3d0; --fg:#065f46; }
  .theme-track  { --bg:#fff7ed; --bd:#fed7aa; --fg:#9a3412; }
  .toggle {
    border: 1px solid transparent;
    padding: .4rem .7rem;
    border-radius: 8px;
    font-size: .9rem;
    font-weight: 600;
    background: transparent;
    transition: background .15s, border-color .15s;
  }
  .toggle:hover { cursor:pointer; background: rgba(0,0,0,.05); }
  .toggle[aria-pressed="true"] { background: rgba(255,255,255,.55); border-color: rgba(0,0,0,.15); }
  .input { width:100%; border:none; background:transparent; font-size:1rem; padding:.4rem .25rem; outline:none; }
  .search-btn { border:none; background:transparent; padding:.4rem; border-radius:8px; }
  .search-btn:hover { cursor:pointer; background: rgba(0,0,0,.06); }

  .results-wrap { margin-top:.75rem; border:1px solid #e5e7eb; border-radius:10px; background:#fff; overflow-x:auto; overflow-y:hidden; padding:.75rem; }
  .results-row { --card-px: 135px; --card-size: 135px; display:grid; grid-auto-flow: column; grid-auto-columns: var(--card-px); gap: 1.25rem; }
  :global(.card){ width: var(--card-px) !important; display: grid; grid-template-rows: auto auto; gap: .6rem; border-radius: 14px; cursor: pointer; }
  :global(.art){ width: 100%; aspect-ratio: 1 / 1; border-radius: 14px; overflow: hidden; background: #f3f4f6; box-shadow: 0 2px 10px rgba(0,0,0,.06); border: 1px solid #e5e7eb; transition: box-shadow .15s ease, transform .06s ease, border-color .15s ease; }
  :global(.card:hover .art){ transform: translateY(-2px); box-shadow: 0 8px 24px rgba(0,0,0,.12); border-color: #d1d5db; cursor: pointer; }
  :global(.thumb){ width: 100% !important; height: 100% !important; object-fit: cover !important; object-position: center center !important; display: block; }
  :global(.meta){ display: grid; gap: .25rem; width: 100%; }
  :global(.title){ font-size: 1.05rem; font-weight: 800; color: #111827; line-height: 1.2; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  :global(.type){ font-size: .9rem; color: #6b7280; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  :global(.thumb), :global(.meta), :global(.title), :global(.type){ pointer-events: none; }

  .section-title { font-weight: 800; margin: 1rem 0 .5rem; }
  .inline-controls { display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; }
  .small { font-size:.85rem; color:#374151; }
</style>

<h2 class="section-title">DB Search</h2>
<div id="dbSearchbar" class="searchbar theme-none" data-mode="none">
  <div class="toggles">
    <button class="toggle" id="dbArtistBtn" type="button" aria-pressed="false">Artist</button>
    <button class="toggle" id="dbAlbumBtn"  type="button" aria-pressed="false">Album</button>
  </div>
  <input class="input" id="dbQ" type="search" placeholder="Select Artist or Album first" />
  <button class="search-btn" id="dbSubmitBtn" type="button" title="Search DB">
    üîé
  </button>
</div>
<div class="results-wrap" id="dbResultsWrap" hidden>
  <div class="results-row" id="dbResultsRow"></div>
</div>

<h2 class="section-title">Spotify Search</h2>
<div id="spSearchbar" class="searchbar theme-none" data-mode="none">
  <div class="toggles">
    <button class="toggle" id="spArtistBtn" type="button" aria-pressed="true">Artist</button>
    <button class="toggle" id="spAlbumBtn"  type="button" aria-pressed="true">Album</button>
    <button class="toggle" id="spTrackBtn"  type="button" aria-pressed="false">Track</button>
  </div>
  <input class="input" id="spQ" type="search" placeholder='Use Spotify filters e.g. album:"Proof" artist:"BTS" year:2022' />
  <button class="search-btn" id="spSubmitBtn" type="button" title="Search Spotify">
    üü¢
  </button>
</div>
<div class="inline-controls small">
  <label>Market:
    <input id="spMarket" type="text" value="KR" style="width:3.5rem" />
  </label>
  <label>Limit:
    <input id="spLimit" type="number" value="12" min="1" max="50" style="width:3.5rem" />
  </label>
  <label>Offset:
    <input id="spOffset" type="number" value="0" min="0" max="1000" style="width:4.5rem" />
  </label>
  <label>include_external:
    <select id="spExternal">
      <option value="">(none)</option>
      <option value="audio">audio</option>
    </select>
  </label>
</div>
<div class="results-wrap" id="spResultsWrap" hidden>
  <div class="results-row" id="spResultsRow"></div>
</div>

<script type="module" src={dbClient}></script>
<script type="module" src={spClient}></script>