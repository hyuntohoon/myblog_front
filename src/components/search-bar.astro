---
// frontmatter Î∂àÌïÑÏöî
const dbClient = '/src/scripts/searchBarDb.client.ts'
const spClient = '/src/scripts/searchBarSpotify.client.ts'
---

<style>
  .searchbar {
  --bg: #f3f4f6; --bd: #d1d5db; --fg: #111827;
  display: grid;
  /* Í∞ÄÏö¥Îç∞ Ïπ∏Ïù¥ 0ÏúºÎ°ú Ï∞åÍ∑∏Îü¨ÏßÄÏßÄ ÏïäÎèÑÎ°ù minmax Ï∂îÍ∞Ä */
  grid-template-columns: auto minmax(280px, 1fr) auto;
  align-items: center;
  gap: .5rem;
  padding: .5rem .75rem;
  border: 1px solid var(--bd);
  border-radius: 8px;
  background: var(--bg);
  color: var(--fg);
  transition: background .15s ease, border-color .15s ease, box-shadow .15s ease;
  box-shadow: 0 1px 2px rgba(0,0,0,.04);
}
.searchForm { 
  display:flex; 
  align-items:center; 
  gap:.5rem; 
  min-width: 280px; /* ÏïàÏ†ÑÏû•Ïπò */
}
  .theme-none{--bg:#f3f4f6;--bd:#d1d5db;--fg:#111827;}
  .theme-artist{--bg:#eef2ff;--bd:#c7d2fe;--fg:#3730a3;}
  .theme-album{--bg:#ecfdf5;--bd:#a7f3d0;--fg:#065f46;}
  .theme-track{--bg:#fff7ed;--bd:#fed7aa;--fg:#9a3412;}
  .toggle{border:1px solid transparent; padding:.4rem .7rem; border-radius:8px; font-size:.9rem; font-weight:600; background:transparent; transition:background .15s, border-color .15s;}
  .toggle:hover{cursor:pointer; background:rgba(0,0,0,.05);}
  .toggle[aria-pressed="true"]{background:rgba(255,255,255,.55); border-color:rgba(0,0,0,.15);}
.input{
  width:100%;
  background:#fff;           /* ‚¨ÖÔ∏é Î∞∞Í≤Ω */
  border:1px solid #d1d5db;  /* ‚¨ÖÔ∏é Î≥¥Îçî */
  border-radius:8px;
  font-size:1rem;
  padding:.5rem .75rem;
  outline:none;
}

  .search-btn{border:none; background:transparent; padding:.4rem; border-radius:8px;}
  .search-btn:hover{cursor:pointer; background:rgba(0,0,0,.06);}

  .section-title{font-weight:800; margin:1rem 0 .5rem;}

  .results-wrap{margin-top:.75rem; border:1px solid #e5e7eb; border-radius:10px; background:#fff; overflow-x:auto; padding:.75rem;}
  .results-row{--card-px:135px; --card-size:135px; display:grid; grid-auto-flow:column; grid-auto-columns:var(--card-px); gap:1.25rem;}
  :global(.card){width:var(--card-px)!important; display:grid; grid-template-rows:auto auto; gap:.6rem; border-radius:14px; cursor:pointer;}
  :global(.art){width:100%; aspect-ratio:1/1; border-radius:14px; overflow:hidden; background:#f3f4f6; box-shadow:0 2px 10px rgba(0,0,0,.06); border:1px solid #e5e7eb; transition:box-shadow .15s, transform .06s, border-color .15s;}
  :global(.card:hover .art){transform:translateY(-2px); box-shadow:0 8px 24px rgba(0,0,0,.12); border-color:#d1d5db;}
  :global(.thumb){width:100%!important; height:100%!important; object-fit:cover!important; object-position:center!important; display:block;}
  :global(.meta){display:grid; gap:.25rem; width:100%;}
  :global(.title){font-size:1.05rem; font-weight:800; color:#111827; line-height:1.2; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}
  :global(.type){font-size:.9rem; color:#6b7280; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}
  :global(.thumb), :global(.meta), :global(.title), :global(.type){pointer-events:none;}
  .input::placeholder { color:#6b7280; }
</style>

<h2 class="section-title">DB Search</h2>
<section id="dbSearchbar" class="searchbar theme-none" data-mode="none">
  <div class="modeBtns toggles">
    <button class="toggle" id="dbArtistBtn" type="button" aria-pressed="false">Artist</button>
    <button class="toggle" id="dbAlbumBtn"  type="button" aria-pressed="false">Album</button>
  </div>

  <div class="searchForm">
    <input class="input" id="dbQ" type="search" placeholder="Select Artist or Album first" />
  </div>

  <div class="searchBtnWrap">
    <button class="search-btn" id="dbSubmitBtn" type="button" title="Search DB">üîé</button>
  </div>
</section>

<div class="results-wrap" id="dbResultsWrap" hidden>
  <div class="results-row" id="dbResultsRow"></div>
</div>

<!-- ÏïÑÌã∞Ïä§Ìä∏ ÌÅ¥Î¶≠ Ïãú Ïï®Î≤îÌñâ -->
<div class="results-wrap" id="dbArtistAlbumsWrap" hidden>
  <div style="font-weight:700; margin-bottom:.5rem;" id="dbArtistAlbumsTitle"></div>
  <div class="results-row" id="dbArtistAlbumsRow"></div>
</div>

<h2 class="section-title" style="margin-top:1.25rem;">Spotify Search</h2>
<section id="spSearchbar" class="searchbar theme-album" data-type="album">
  <!-- 1Ìñâ -->
  <div class="modeBtns">
    <button id="spArtistBtn" type="button" class="toggle" aria-pressed="false">Artist</button>
    <button id="spAlbumBtn"  type="button" class="toggle" aria-pressed="true">Album</button>
    <button id="spTrackBtn"  type="button" class="toggle" aria-pressed="false">Track</button>
  </div>

  <div class="searchForm">
    <input id="spQ" class="input" type="text" placeholder='Use Spotify filters e.g. album:"Proof" artist:"BTS" year:2022' />
  </div>

  <div class="searchBtnWrap">
    <button id="spSubmitBtn" class="search-btn" type="button" title="Search Spotify">üü¢ Search</button>
  </div>

  <!-- 2Ìñâ: Ïπ© -->
  <div class="filterChips" id="spChips">
    <button class="chip" id="chipMarket">Market: <span class="val" id="chipMarketVal">KR</span></button>
    <button class="chip" id="chipYear">Year: <span class="val" id="chipYearVal">Any</span></button>
    <button class="chip" id="chipExplicit">Explicit: <span class="val" id="chipExplicitVal">Off</span></button>
    <button class="chip" id="chipSort">Sort: <span class="val" id="chipSortVal">Relevance</span></button>
    <button class="chip" id="chipAdvanced">Í≥†Í∏â ÏòµÏÖò</button>
  </div>

  <!-- ÌéºÏπ®: Í≥†Í∏â(Í∏∞Ï°¥ ÏòµÏÖò Ïú†ÏßÄ) -->
  <details class="advanced" id="spAdvanced">
    <summary>Advanced options</summary>
    <div class="row">
      <label>Market:
        <select id="spMarket">
          <option value="KR" selected>KR (Korea)</option>
          <option value="US">US (United States)</option>
          <option value="JP">JP (Japan)</option>
          <option value="GB">GB (United Kingdom)</option>
          <option value="FR">FR (France)</option>
          <option value="DE">DE (Germany)</option>
          <option value="BR">BR (Brazil)</option>
          <option value="IN">IN (India)</option>
        </select>
      </label>
      <label>Limit: <input id="spLimit" type="number" value="12" min="1" max="50" style="width:60px;" /></label>
      <label>Offset: <input id="spOffset" type="number" value="0" min="0" style="width:60px;" /></label>
      <label>External:
        <select id="spExternal">
          <option value="">Default</option>
          <option value="audio">Include audio</option>
        </select>
      </label>
    </div>
  </details>
</section>

<div class="results-wrap" id="spResultsWrap" hidden>
  <div class="results-row" id="spResultsRow"></div>
</div>

<script type="module" src={dbClient}></script>
<script type="module" src={spClient}></script>