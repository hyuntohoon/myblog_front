---
import type { HTMLAttributes } from 'astro/types'

type Variant = 'highlight' | 'subtle'

interface Props extends HTMLAttributes<'a'> {
  variant?: Variant
}

const { class: className, variant = 'subtle', href = '', ...rest } = Astro.props

// ✅ 끝 슬래시 제거 (루트 '/'는 제외)
function stripTrailingSlash(u: string) {
  if (!u) return u
  return u !== '/' && u.endsWith('/') ? u.slice(0, -1) : u
}

const finalHref = stripTrailingSlash(href)

const styleVariants: Record<Variant, string> = {
  highlight: 'text-lg md:text-xl lg:text-2xl',
  subtle: 'text-subtle',
}
---

<a
  href={finalHref}
  class:list={[styleVariants[variant], 'hover:underline hover:text-highlight', className]}
  {...rest}
>
  <slot />
</a>